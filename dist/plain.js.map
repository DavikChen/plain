{"version":3,"file":"plain.js","sources":["../src/plain.ts"],"sourcesContent":["import { Layers } from './type/type';\nimport Factory from './factory/index';\nimport { mapOption, markerOption, polylineOption } from './options/mapOptions';\n\nexport default class Plain {\n    map: object;\n    // layers: Layers;                         // every layer has own id and type\n    factory: Factory;          \n    \n    constructor (factory?: Factory ) {\n        // this.layers = {};        \n        this.use(factory);        \n    }\n\n    // load the map factory plugin\n    use (factory: Factory): Plain {\n        this.factory = factory;\n        return this;\n    }\n\n    // create Map\n    @tagging()\n    Map (opt: mapOption) {\n        return this.factory.Map(opt);\n    }\n\n    @tagging()\n    Marker (opt: markerOption) {\n        return this.factory.Marker(opt);\n    }\n\n    @tagging()\n    Polyline (opt: polylineOption) {\n        let polyline = this.factory.Polyline(opt);\n        return this.factory.Polyline(opt);\n    }\n    \n    tag<T extends {_id: string}> (module:T): T {\n        module._id = Math.random().toString(16).substr(2);\n        return module;\n    }\n}\n\n/**\n * PropertyDescriptor\n */\nfunction tagging (): Function {\n    return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n        let oldFn = descriptor.value;\n        descriptor.value= function (arg: any) {\n            let value = oldFn.call(this, arg);\n            value._id = Math.random().toString(16).substr(2);\n            return value;  \n        };\n    }\n}\n\n// function interval (time: number): Function {\n//     return function (target: any, propertyKey: string, descriptor: PropertyDecorator) {\n//         setInterval( () => {\n//             console.log( `[decorator] 每 ${ time } 毫秒后开始执行`);\n//             target[propertyKey]();\n//         }, time );\n//     }\n// }\n"],"names":[],"mappings":";;;;;;;;;;;;;AAIe;IAKX,eAAa,OAAiB;QAE1B,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;KACrB;IAGD,mBAAG,GAAH,UAAK,OAAgB;QACjB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,OAAO,IAAI,CAAC;KACf;IAID,mBAAG,GAAH,UAAK,GAAc;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;KAChC;IAGD,sBAAM,GAAN,UAAQ,GAAiB;QACrB,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;KACnC;IAGD,wBAAQ,GAAR,UAAU,GAAmB;QACzB,IAAI,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QAC1C,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;KACrC;IAED,mBAAG,GAAH,UAA8B,MAAQ;QAClC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QAClD,OAAO,MAAM,CAAC;KACjB;IAnBD;QAAC,OAAO,EAAE;oCAAA;IAKV;QAAC,OAAO,EAAE;uCAAA;IAKV;QAAC,OAAO,EAAE;yCAAA;IAUd,YAAC;CAAA,IAAA;AAKD;IACI,OAAO,UAAU,MAAW,EAAE,WAAmB,EAAE,UAA8B;QAC7E,IAAI,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC;QAC7B,UAAU,CAAC,KAAK,GAAE,UAAU,GAAQ;YAChC,IAAI,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;YAClC,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACjD,OAAO,KAAK,CAAC;SAChB,CAAC;KACL,CAAA;CACJ;;;;;;;;"}